<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8">

<title>Death To _blank Test Page</title>

<style>

body { font-family: sans-serif; line-height: 1.6; padding: 2em; background-color: #f4f4f4; }

h1, h2 { color: #333; }

.container { max-width: 800px; margin: auto; background: white; padding: 2em; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }

a { color: #007bff; }

code { background-color: #eee; padding: 2px 6px; border-radius: 4px; }

.test-case { border: 1px solid #ddd; padding: 1em; margin-bottom: 1em; border-radius: 4px; }

.status { font-weight: bold; }

.pass { color: #28a745; }

.fail { color: #dc3545; }

.info { color: #666; font-size: 0.9em; }

</style>

</head>

<body>

<div class="container">

<h1>Death To _blank Sanitization Test</h1>

<p>This page tests if the extension is correctly adding <code>rel="noopener noreferrer"</code> to links and forms.</p>

<p><b>Instructions:</b> Open your browser's Developer Tools (Ctrl+Shift+I or F12), go to the "Elements" tab, and inspect the links below to see if their <code>rel</code> attribute has been added or modified.</p>

<button onclick="window.location.reload()">Reload Page to Re-test</button>

<hr>

<h2>Link Tests</h2>

<div class="test-case">

<h3>Test 1: Standard target="_blank" link</h3>

<p><a id="test1" href="https://example.com" target="_blank">This is a standard blank target link.</a></p>

<p class="info">It should have <code>rel="noopener noreferrer"</code> added.</p>

</div>

<div class="test-case">

<h3>Test 2: Link with existing rel attribute</h3>

<p><a id="test2" href="https://example.com" target="_blank" rel="author">This link has a pre-existing "author" rel.</a></p>

<p class="info">The existing value should be preserved, resulting in something like <code>rel="author noopener noreferrer"</code>.</p>

</div>

<div class="test-case">

<h3>Test 3: Link with rel="noopener" but missing noreferrer</h3>

<p><a id="test3" href="https://example.com" target="_blank" rel="noopener">This link is missing noreferrer.</a></p>

<p class="info">It should have <code>noreferrer</code> added, resulting in <code>rel="noopener noreferrer"</code>.</p>

</div>

<div class="test-case">

<h3>Test 4: Link with a non-blank target</h3>

<p><a id="test4" href="https://example.com" target="_self">This link targets _self.</a></p>

<p class="info">This link should be <b>ignored</b> by the extension. No changes should be made.</p>

</div>

<div class="test-case">

<h3>Test 5: Dynamically added link</h3>

<p id="dynamic-container"></p>

<button onclick="addDynamicLink()">Add Dynamic Link</button>

<p class="info">Click the button. The new link should be sanitized shortly after it appears on the page.</p>

</div>

<h2>Form Test</h2>

<div class="test-case">

<h3>Test 6: Form with target="_blank"</h3>

<form id="test6" action="https://example.com" method="get" target="_blank">

<p>This form is set to submit to a new tab. If form filtering is enabled, it should be sanitized.</p>

<input type="text" name="q" value="test" />

<button type="submit">Submit Form</button>

</form>

<p class="info">The form element itself should have <code>rel="noopener noreferrer"</code> added.</p>

</div>

</div>

<script>

function addDynamicLink() {

const container = document.getElementById("dynamic-container");

if (!container.hasChildNodes()) {

const newLink = document.createElement("a");

newLink.href = "https://example.com";

newLink.target = "_blank";

newLink.textContent = "I was added dynamically!";

container.appendChild(newLink);

}

}

</script>

</body>

</html>